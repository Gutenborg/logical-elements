var y=Object.defineProperty;var E=(r,s,e)=>s in r?y(r,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[s]=e;var a=(r,s,e)=>E(r,typeof s!="symbol"?s+"":s,e);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();class S{constructor(){a(this,"timeoutId",null)}scheduleUpdate(s){this.timeoutId!==null&&cancelAnimationFrame(this.timeoutId),this.timeoutId=requestAnimationFrame(()=>{s(),this.timeoutId=null})}}class l{constructor(s){a(this,"_store",this._createProxy({}));a(this,"_subscribers",{});a(this,"name");a(this,"reader",null);this.name=s}static isStateValue(s){return!!(s!=null&&s.startsWith("{")&&(s!=null&&s.endsWith("}")))}static parsePath(s){if(typeof s!="string"||!l.isStateValue(s))return{name:"",path:""};const e=s.slice(1,s.length-1).split("."),t=e.shift()??"",n=e.join(".");return{name:t,path:n}}get store(){return this._store}set store(s){if(!this._canProxy){console.warn("Invalid store value. Store must be either an object or an array.",s);return}const e=this._createProxy(s);this.notify("_store",e,this._store),this._store=e}_canProxy(s){return!!(Array.isArray(s)||typeof s=="object"&&s!==null)}_createProxyHandler(s=this){return{get(e,t){let n=e[t];return typeof n=="function"&&n.name==="_deriveWrappedCallback"&&(n=n()),n},set(e,t,n){const i=e[t];return n===i||(s._canProxy(n)?(console.log("Need to create a new proxy"),e[t]=s._createProxy(n)):e[t]=n,s.notify(t,e[t],i)),!0}}}_createProxy(s={}){if(Array.isArray(s))return new Proxy(s,this._createProxyHandler());const e={};for(const t in s)this._canProxy(s[t])?e[t]=this._createProxy(s[t]):e[t]=s[t];return new Proxy(e,this._createProxyHandler())}derive(s){if(typeof s!="function")return console.warn("No function to derive from, returning value as provided"),s;const e=()=>s.call(this,this._store,this.reader);return this.reader=null,e}lookupValue(s){const e=s.split(".");let t;return e.length===1?t=this._store[e[0]]:t=e.reduce((n,i)=>{if(n[i]!==void 0)return n[i]},this._store),t}notify(s,e,t){for(const n in this._subscribers)this._subscribers[n](s,t,e)}subscribe(s){let e=Object.keys(this._subscribers).length+1;return typeof s!="function"?(console.warn("Subscriber is not callable",s),null):(this._subscribers[e]=s,e)}unsubscribe(s){return s==null||this._subscribers[s]===void 0?!1:(delete this._subscribers[s],!0)}}class p extends HTMLElement{constructor(){super(...arguments);a(this,"_childrenObserver",null);a(this,"_providerSubscriptions",[]);a(this,"updateScheduler",new S);a(this,"isParsed",!1);a(this,"isInitialized",!1);a(this,"disableProviderUpdates",!1);a(this,"reactiveNamespaces",new Map);a(this,"attributeChangedEventOptions",{bubbles:!1,cancelable:!1,composed:!1});a(this,"childrenModifiedEventOptions",{bubbles:!1,cancelable:!1,composed:!1});a(this,"connectedEventOptions",{bubbles:!0,cancelable:!0,composed:!1});a(this,"disconnectedEventOptions",{bubbles:!0,cancelable:!0,composed:!1});a(this,"parsedEventOptions",{bubbles:!1,cancelable:!1,composed:!1});a(this,"providerUpdatedEventOptions",{bubbles:!1,cancelable:!1,composed:!1});a(this,"updatedEventOptions",{bubbles:!0,cancelable:!0,composed:!1})}get stateProviders(){const e={};for(let t=this;t!==null&&t!==document.body;t=t.parentElement){const n=t.getAttribute("name");t instanceof m&&typeof n=="string"&&(e[n]=t.state)}return e}attributeChangedCallback(e,t,n){if(l.isStateValue(n)){const{name:i}=l.parsePath(t),{name:o}=l.parsePath(n);if(i!==o){const c=this.getStateProvider(t),u=this._providerSubscriptions.findIndex(f=>f.attribute===e);c instanceof l&&u>=0&&c.unsubscribe(u);const d=this.stateProviders[o],h=d==null?void 0:d.subscribe((f,b,C)=>{this.providerUpdatedCallback(d.name,f,b,C)});typeof h=="number"&&this._providerSubscriptions.push({attribute:e,id:h})}}this.isParsed&&(this.updateScheduler.scheduleUpdate(this.updatedCallback.bind(this)),typeof this.onAttributeChanged=="function"&&this.onAttributeChanged(e,t,n),this.dispatchEvent(new CustomEvent("le-attribute-changed",{...this.attributeChangedEventOptions,detail:{attribute:e,newValue:n,previousValue:t}})))}childrenModifiedCallback(e){this.updateScheduler.scheduleUpdate(this.updatedCallback.bind(this)),typeof this.onChildrenModified=="function"&&this.onChildrenModified(e),this.dispatchEvent(new CustomEvent("le-children-modified",{...this.childrenModifiedEventOptions,detail:e}))}connectedCallback(){if(typeof this.onConnected=="function"&&this.onConnected(),this.dispatchEvent(new CustomEvent("le-connected",{...this.connectedEventOptions,detail:null})),this.ownerDocument.readyState!=="complete"){const e=()=>{t.disconnect(),this.removeEventListener("DOMContentLoaded",e),this.parsedCallback()},t=new MutationObserver(e);t.observe(this.parentElement,{childList:!0,subtree:!1}),this.ownerDocument.addEventListener("DOMContentLoaded",e)}else this.parsedCallback()}disconnectedCallback(){typeof this.onDisconnected=="function"&&this.onDisconnected(),this.dispatchEvent(new CustomEvent("le-disconnected",{...this.attributeChangedEventOptions,detail:null}))}parsedCallback(){var e;for(let t=this;t!==null;t=t.parentNode)if(t.nextSibling!==null||t.parentNode&&t.parentNode.lastChild===t){this.isParsed=!0;break}this.isParsed?(this.updateScheduler.scheduleUpdate(this.updatedCallback.bind(this)),typeof this.onParsed=="function"&&this.onParsed(),this.dispatchEvent(new CustomEvent("le-parsed",{...this.parsedEventOptions,detail:null})),this._childrenObserver=new MutationObserver(this.childrenModifiedCallback.bind(this)),(e=this._childrenObserver)==null||e.observe(this,{childList:!0})):requestAnimationFrame(this.parsedCallback)}providerUpdatedCallback(e,t,n,i){this.disableProviderUpdates||this.updateScheduler.scheduleUpdate(this.updatedCallback.bind(this)),typeof this.onProviderUpdated=="function"&&this.onProviderUpdated(e,t,n,i),this.dispatchEvent(new CustomEvent("le-provider-updated",{...this.updatedEventOptions,detail:{provider:e,property:t,previousValue:n,newValue:i}}))}updatedCallback(){typeof this.onBeforeUpdated=="function"&&this.onBeforeUpdated(),this.isInitialized||(this.isInitialized=!0),this.handleReactiveNamespaces(),typeof this.onUpdated=="function"&&this.onUpdated(),this.dispatchEvent(new CustomEvent("le-updated",{...this.updatedEventOptions,detail:null}))}eachChild(e,t=this){if(typeof e!="function")return;const n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT);let i=n.nextNode();for(;i;){const c=e(i,n);c===void 0?i=n.nextNode():i=c}}getStateFromAttribute(e,t=null){const n=super.getAttribute(e);return l.isStateValue(n)?this.getStateValue(n,t):n}getStateProvider(e){const{name:t}=l.parsePath(e);return this.stateProviders[t]}getStateValue(e,t=null){const{name:n,path:i}=l.parsePath(e),o=this.stateProviders[n];if(o instanceof l)return o.reader=t,o.lookupValue(i)}handleReactiveNamespaces(){if(!this.isParsed||!this.isInitialized)return;let e=new Map;this.eachChild((t,n)=>{if(t instanceof m)return t.handleReactiveNamespaces(),n.nextSibling();for(const[i,o]of this.reactiveNamespaces){if(typeof o!="function")continue;const c=t.getAttributeNames().filter(u=>u.startsWith(`${i}:`));if(c.length>0){const u=c.map(d=>({element:t,name:d,localName:d.split(":")[1],value:t.getAttribute(d)}));if(e.has(o)&&Array.isArray(e.get(o))){const d=e.get(o);e.set(o,d.concat(u))}else e.set(o,u)}}});for(const[t,n]of e)t.call(this,n,this)}}function w(r){let s=null;return typeof r=="string"||typeof r=="number"?s=String(r):typeof r=="boolean"&&(s=r?"":null),s}function _(r,s){for(const e of r){let t=e.value;l.isStateValue(e.value)&&(t=s.getStateValue(e.value,e.element));const n=w(t);switch(n){case"false":case null:case"null":e.element.removeAttribute(e.localName);break;default:e.element.setAttribute(e.localName,n);break}}}function x(r,s){for(const e of r){let t=e.value;l.isStateValue(e.value)&&(t=s.getStateValue(e.value,e.element));const n=e.localName.split("|");t?e.element.classList.add(...n):e.element.classList.remove(...n)}}function A(r,s){const e=s;e.eventController instanceof AbortController&&e.eventController.abort(),e.eventController=new AbortController;for(const t of r){if(!t.value||!l.isStateValue(t.value))continue;const n=s.getStateValue(t.value,t.element);typeof n=="function"&&t.element.addEventListener(t.localName,n,{signal:e.eventController.signal})}}function N(r,s){for(const e of r){let t=e.value;switch(t!=null&&t.startsWith("{")&&(t!=null&&t.endsWith("}"))&&(t=s.getStateValue(t,e.element)),e.localName){case"text":e.element.textContent=t;break}}}class m extends p{constructor(){super(...arguments);a(this,"_state",new l(this._stateName));a(this,"_stateSubscriberId",null);a(this,"stateUpdatedEventOptions",{bubbles:!1,cancelable:!1,composed:!1})}get _stateName(){return this.getAttribute("name")??this.getAttribute("id")??window.crypto.randomUUID()}get state(){return this._state}connectedCallback(){this._stateSubscriberId=this.state.subscribe(this.stateUpdatedCallback.bind(this)),this.reactiveNamespaces.set("attr",_),this.reactiveNamespaces.set("cls",x),this.reactiveNamespaces.set("on",A),this.reactiveNamespaces.set("set",N),super.connectedCallback()}disconnectedCallback(){this.state.unsubscribe(this._stateSubscriberId),super.disconnectedCallback()}stateUpdatedCallback(e,t,n){this.updateScheduler.scheduleUpdate(this.updatedCallback.bind(this)),typeof this.onStateUpdated=="function"&&this.onStateUpdated(e,t,n),this.dispatchEvent(new CustomEvent("le-state-updated",{...this.stateUpdatedEventOptions,detail:{property:e,newValue:n,previousValue:t}}))}}class P extends m{onParsed(){const s=this.querySelector("script"),e=this.getAttribute("name");s!==null&&e===null?console.warn("No namespace provided to lookup the context function"):s!==null&&typeof e=="string"&&typeof window[e]=="function"&&(this.state.store=window[e].call(this,this.state))}}window.customElements.define("le-context",P);class v extends p{constructor(){super(...arguments);a(this,"renderedItemCount",0)}get template(){return this.querySelector("template")}get isEmpty(){return this.list.length<=0}get list(){const e=this.getAttribute("list"),t=this.getStateValue(e,this);return Array.isArray(t)?t:[]}onParsed(){this.renderEach()}onProviderUpdated(){this.renderedItemCount!==this.list.length&&this.renderEach()}renderEach(){const e=this.list,t=this.template,n=this.getAttribute("as"),i=this.querySelector("[data-apply-template]");if(i===null||!(t instanceof HTMLTemplateElement)||typeof n!="string")return;const o=document.createDocumentFragment();Array.from(i.childNodes).forEach(c=>c.remove());for(const c of e.keys()){const u=document.importNode(t.content,!0);this.eachChild(d=>{for(const h of d.attributes)if(h.value!==`${n}.index`){if(h.value.startsWith(`{${n}`)&&h.value.endsWith("}")){const f=this.getAttribute("list").slice(1,-1),b=h.value.replace(n,`${f}.${c}`);h.value=b}}},u),o.appendChild(u)}this.renderedItemCount=e.length,i.appendChild(o)}}a(v,"observedAttributes",["as","list"]);window.customElements.define("le-each",v);class g extends p{get condition(){return this.getStateFromAttribute("condition",this)}onUpdated(){this.isConditionTrue()?this.showContent():this.hideContent()}hideContent(){this.hidden=!0}showContent(){this.hidden=!1}isConditionTrue(){const s=this.condition;return s==="true"?!0:s==="false"||s===null?!1:s}}a(g,"observedAttributes",["condition"]);window.customElements.define("le-if",g);class k extends p{constructor(){super(...arguments);a(this,"relevantSiblingHandlers",new Map([["le-each",this.checkLeEach],["le-if",this.checkLeIf]]))}get relevantSiblings(){let e=[];if(!(this.parentElement instanceof HTMLElement))return e;const t=this.parentElement.querySelectorAll(Array.from(this.relevantSiblingHandlers.keys()).join(","));return(t==null?void 0:t.length)>0&&(e=Array.from(t)),e}onDisconnected(){var e;(e=this.parentElement)==null||e.removeEventListener("le-updated",this.handleUpdates)}onParsed(){var e;(e=this.parentElement)==null||e.addEventListener("le-updated",this.handleUpdates.bind(this))}onUpdated(){let e=!1;const t=this.relevantSiblings;for(const n of t){const i=this.relevantSiblingHandlers.get(n.tagName.toLowerCase());if(typeof i=="function"&&i(n)){e=!0;break}}e?this.hideContent():this.showContent()}handleUpdates(e){const t=this.relevantSiblings;for(const n of t)if(e.target===n){this.updateScheduler.scheduleUpdate(this.updatedCallback.bind(this));break}}checkLeEach(e){return e instanceof v?!e.isEmpty:!1}checkLeIf(e){return e instanceof g?e.condition:!1}hideContent(){this.hidden=!0}showContent(){this.hidden=!1}}window.customElements.define("le-else",k);
